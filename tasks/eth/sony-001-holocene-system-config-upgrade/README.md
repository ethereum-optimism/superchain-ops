# Holocene Hardfork Upgrade - `SystemConfig`

Status: READY TO SIGN

## Objective

Upgrades the `SystemConfig` for the Holocene hardfork.

The proposal was:

- [x] [Posted](https://gov.optimism.io/t/upgrade-proposal-11-holocene-network-upgrade/9313) on the governance forum.
- [x] [Approved](https://vote.optimism.io/proposals/20127877429053636874064552098716749508236019236440427814457915785398876262515) by Token House voting.
- [x] Not vetoed by the Citizens' house.
- [x] Executed on OP Mainnet.

This upgrades the SystemConfig in the v1.8.0-rc.4 release.

The governance proposal should be treated as the source of truth and used to verify the correctness of the onchain operations.

This upgrades the `SystemConfig` in the
[v1.8.0-rc.4](https://github.com/ethereum-optimism/optimism/tree/v1.8.0-rc.4) release.

## Pre-deployments

- `SystemConfig` - `0xAB9d6cB7A427c0765163A7f45BB91cAfe5f2D375`

## Simulation

Please see the "Simulating and Verifying the Transaction" instructions in [NESTED.md](../../../NESTED.md).
When simulating, ensure the logs say `Using script /your/path/to/superchain-ops/tasks/<path>/NestedSignFromJson.s.sol`.
This ensures all safety checks are run. If the default `NestedSignFromJson.s.sol` script is shown (without the full path), something is wrong and the safety checks will not run.

## State Validation

Please see the instructions for [validation](./VALIDATION.md).

## Execution

This upgrade
* Changes the implementation of the `SystemConfig` to hold EIP-1559 parameters for the Holocene upgrade.

See the `input.json` bundle for full details.

The batch will be executed on chain ID `1`, and contains `3` transactions.

## Tx #1: ProxyAdmin.upgrade(SystemConfigProxy, StorageSetter)
Upgrades the `SystemConfigProxy`to the StorageSetter.

**Function Signature:** `upgrade(address,address)`

**To:** `0x89889B569c3a505f3640ee1Bd0ac1D557f436D2a`

**Value:** `0 WEI`

**Raw Input Data:** `0x99a88ec40000000000000000000000007a8ed66b319911a0f3e7288bddab30d9c0c875c3000000000000000000000000d81f43edbcacb4c29a9ba38a13ee5d79278270cc`

### Inputs
**_implementation:** `0xd81f43eDBCAcb4c29a9bA38a13Ee5d79278270cC`

**_proxy:** `0x7A8Ed66B319911A0F3E7288BDdAB30d9c0C875c3`


## Tx #2: SystemConfigProxy.setBytes32(0,0)
Zeroes out the initialized state variable to allow reinitialization.

**Function Signature:** `setBytes32(bytes32,bytes32)`

**To:** `0x7A8Ed66B319911A0F3E7288BDdAB30d9c0C875c3`

**Value:** `0 WEI`

**Raw Input Data:** `0x4e91db0800000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000`

### Inputs
**_value:** `0x0000000000000000000000000000000000000000000000000000000000000000`

**_slot:** `0x0000000000000000000000000000000000000000000000000000000000000000`


## Tx #3: ProxyAdmin.upgradeAndCall(SystemConfigProxy, SystemConfigImplementation, Initialize())
Upgrades the SystemConfig to a new implementation and initializes it.

**Function Signature:** `upgradeAndCall(address,address,bytes)`

**To:** `0x89889B569c3a505f3640ee1Bd0ac1D557f436D2a`

**Value:** `0 WEI`

**Raw Input Data:** `0x9623609d0000000000000000000000007a8ed66b319911a0f3e7288bddab30d9c0c875c3000000000000000000000000ab9d6cb7a427c0765163a7f45bb91cafe5f2d37500000000000000000000000000000000000000000000000000000000000000600000000000000000000000000000000000000000000000000000000000000284db9040fa000000000000000000000000509182ec226b3b71d36a3255a80ef0b1a9d4303300000000000000000000000000000000000000000000000000000000000026080000000000000000000000000000000000000000000000000000000000177fef0000000000000000000000006776be80dbada6a02b5f2095cf13734ac303b8d10000000000000000000000000000000000000000000000000000000001c9c3800000000000000000000000007c2bd59ee2a2c7391c9a240132f26071e95462620000000000000000000000000000000000000000000000000000000001312d00000000000000000000000000000000000000000000000000000000000000000a0000000000000000000000000000000000000000000000000000000000000008000000000000000000000000000000000000000000000000000000003b9aca0000000000000000000000000000000000000000000000000000000000000f424000000000000000000000000000000000ffffffffffffffffffffffffffffffff000000000000000000000000008dc74cecc9deda8595b2fe210ce5979f0bfa8e0000000000000000000000009cf951e3f74b644e621b36ca9cea147a78d4c39f0000000000000000000000005933e323be8896dfacd1cd671442f27daa10a053000000000000000000000000eb9bf100225c214efc3e7c651ebbadcf85177607000000000000000000000000512a3d2c7a43bd9261d2b8e8c9c70d4bd4d503c000000000000000000000000088e529a6ccd302c948689cd5156c83d4614fae92000000000000000000000000c1047e30efc9e172cfe7aa0219895b6a43fc415f000000000000000000000000eeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee00000000000000000000000000000000000000000000000000000000`

### Inputs
**_proxy:** `0x7A8Ed66B319911A0F3E7288BDdAB30d9c0C875c3`

**_data:** `0xdb9040fa000000000000000000000000509182ec226b3b71d36a3255a80ef0b1a9d4303300000000000000000000000000000000000000000000000000000000000026080000000000000000000000000000000000000000000000000000000000177fef0000000000000000000000006776be80dbada6a02b5f2095cf13734ac303b8d10000000000000000000000000000000000000000000000000000000001c9c3800000000000000000000000007c2bd59ee2a2c7391c9a240132f26071e95462620000000000000000000000000000000000000000000000000000000001312d00000000000000000000000000000000000000000000000000000000000000000a0000000000000000000000000000000000000000000000000000000000000008000000000000000000000000000000000000000000000000000000003b9aca0000000000000000000000000000000000000000000000000000000000000f424000000000000000000000000000000000ffffffffffffffffffffffffffffffff000000000000000000000000008dc74cecc9deda8595b2fe210ce5979f0bfa8e0000000000000000000000009cf951e3f74b644e621b36ca9cea147a78d4c39f0000000000000000000000005933e323be8896dfacd1cd671442f27daa10a053000000000000000000000000eb9bf100225c214efc3e7c651ebbadcf85177607000000000000000000000000512a3d2c7a43bd9261d2b8e8c9c70d4bd4d503c000000000000000000000000088e529a6ccd302c948689cd5156c83d4614fae92000000000000000000000000c1047e30efc9e172cfe7aa0219895b6a43fc415f000000000000000000000000eeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee`

**_implementation:** `0xAB9d6cB7A427c0765163A7f45BB91cAfe5f2D375`
