# Revenue Share Simulations
A list of tenderly simulations are provided based on the formatting of the `TransactionDeposited` events emitted in L1 and its execution in the target L2, in this case, OP Mainnet. For details, check the [Simulating Portal Deposit Transactions](todo) document

### Revenue Share Upgrade Opt In
1. [L1Withdrawer Deploy](https://www.tdly.co/shared/simulation/cfb6f065-1f37-47ee-96e1-9a32ea80f540) Gas: 558,056/656,536 (85%)
2. [Rev Share Calculator Deploy](https://www.tdly.co/shared/simulation/5c813d81-9fa7-45e5-ac61-bbe89b917be8) Gas: 579,688/681,986 (85%)
3. [Fee Splitter Deploy](https://www.tdly.co/shared/simulation/93b43e8d-e64c-4ce5-ad2c-7047e91e4a4c) Gas: 1,121,747/1,319,702 (85%)
4. [Fee Splitter Upgrade](https://www.tdly.co/shared/simulation/ac7c91dc-9c1b-4b56-bfd4-bad52fd0b2aa) Gas: 65,138/150,000 (43%)
5. [Operator Fee Vault Deploy](https://www.tdly.co/shared/simulation/4c95b834-89b4-4f2e-8bca-8df9ed0cc885) Gas: 893,030/1,200,000 (74%)
6. [Operator Fee Vault Upgrade](https://www.tdly.co/shared/simulation/45662e37-ab84-4ad9-96ee-46144eb0ec49) Gas: 48,770/150,000 (33%)
7. [Sequencer Fee Vault Deploy](https://www.tdly.co/shared/simulation/4e24dd89-f601-4a54-a72d-3ac4a4c1e7c8) Gas: 890,692/1,200,000 (74%)
8. [Sequencer Fee Vault Upgrade](https://www.tdly.co/shared/simulation/29051fa4-0687-4a58-9ea5-6a09497e3846) Gas: 46,270/150,000 (31%)
9. [Base Fee Vault Deploy](https://www.tdly.co/shared/simulation/515d5554-1f3e-4061-be24-6d3e888ed4d9) Gas: 890,692/1,200,000 (74%)
10. [Base Fee Vault Upgrade](https://www.tdly.co/shared/simulation/04d8de5e-89bc-419d-bbcf-ee0448d0e813) Gas: 48,782/150,000 (33%)
11. [L1 Fee Vault Deploy](https://www.tdly.co/shared/simulation/bcee51db-b549-4c05-811f-be831e6a1aa0) Gas: 890,704/1,200,000 (74%)
12. [L1 Fee Vault Upgrade](https://www.tdly.co/shared/simulation/20dbe19b-cea7-4542-a73b-71934394153e) Gas: 48,782/150,000 (33%)

**Disclaimer**: The contracts addresses sent in the implementation contracts when calling upgrades, do not match with the addresses deployed in the transaction before. This is because given the simulations are done in an isolated environment (instead of being bundled), the nonce of the POA isn't the expected. To verify that it is working propertly, the integration tests with Supersim *do* work.

### Revenue Share Upgrade Opt Out
1. [Fee Splitter Deploy](https://www.tdly.co/shared/simulation/93b43e8d-e64c-4ce5-ad2c-7047e91e4a4c) Gas: 1,121,747/1,319,702 (85%)
2. [Fee Splitter Upgrade](https://www.tdly.co/shared/simulation/ac7c91dc-9c1b-4b56-bfd4-bad52fd0b2aa) Gas: 65,138/150,000 (43%)
3. [Operator Fee Vault Deploy](https://www.tdly.co/shared/simulation/4c95b834-89b4-4f2e-8bca-8df9ed0cc885) Gas: Gas: 893,030/1,200,000 (74%)
4. [Operator Fee Vault Upgrade](https://www.tdly.co/shared/simulation/45662e37-ab84-4ad9-96ee-46144eb0ec49) Gas: 48,770/150,000 (33%)
5. [Sequencer Fee Vault Deploy](https://www.tdly.co/shared/simulation/4e24dd89-f601-4a54-a72d-3ac4a4c1e7c8) Gas: 890,692/1,200,000 (74%)
6. [Sequencer Fee Vault Upgrade](https://www.tdly.co/shared/simulation/29051fa4-0687-4a58-9ea5-6a09497e3846) Gas: 46,270/150,000 (31%)
7. [Base Fee Vault Deploy](https://www.tdly.co/shared/simulation/515d5554-1f3e-4061-be24-6d3e888ed4d9) Gas: 890,692/1,200,000 (74%)
8. [Base Fee Vault Upgrade](https://www.tdly.co/shared/simulation/04d8de5e-89bc-419d-bbcf-ee0448d0e813) Gas: 48,782/150,000 (33%)
9. [L1 Fee Vault Deploy](https://www.tdly.co/shared/simulation/bcee51db-b549-4c05-811f-be831e6a1aa0) Gas: 890,704/1,200,000 (74%)
10. [L1 Fee Vault Upgrade](https://www.tdly.co/shared/simulation/20dbe19b-cea7-4542-a73b-71934394153e) Gas: 48,782/150,000 (33%)

### Revenue Share Late Opt In
Given that this transactions depend on the Fee Vault upgrades to after that call the Fee Vault setters, and that Tenderly simulations can't keep the state of previously simulated transactions. No simulations are provided for this flow, for more info check the [Simulate L2 Deposit Transactions](src/doc/simulate-l2-deposit-transactions.md) doc